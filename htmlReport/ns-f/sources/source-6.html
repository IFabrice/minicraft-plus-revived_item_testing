


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > Display</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">minicraft.screen</a>
</div>

<h1>Coverage Summary for Class: Display (minicraft.screen)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Display</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    25%
  </span>
  <span class="absValue">
    (3/12)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    19%
  </span>
  <span class="absValue">
    (12/63)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package minicraft.screen;
&nbsp;
&nbsp;import minicraft.core.Game;
&nbsp;import minicraft.core.io.InputHandler;
&nbsp;import minicraft.core.io.Sound;
&nbsp;import minicraft.gfx.Screen;
&nbsp;import minicraft.screen.entry.ArrayEntry;
&nbsp;import org.jetbrains.annotations.Nullable;
&nbsp;
&nbsp;public class Display {
&nbsp;
<b class="fc">&nbsp;	private Display parent = null;</b>
&nbsp;
&nbsp;	protected Menu[] menus;
&nbsp;	int selection;
&nbsp;
&nbsp;	private final boolean canExit, clearScreen;
&nbsp;
&nbsp;	public Display() {
<b class="fc">&nbsp;		this(new Menu[0]);</b>
<b class="fc">&nbsp;	}</b>
&nbsp;
&nbsp;	public Display(Menu... menus) {
<b class="fc">&nbsp;		this(false, true, menus);</b>
<b class="fc">&nbsp;	}</b>
&nbsp;
&nbsp;	public Display(boolean clearScreen) {
<b class="nc">&nbsp;		this(clearScreen, true, new Menu[0]);</b>
<b class="nc">&nbsp;	}</b>
&nbsp;
&nbsp;	public Display(boolean clearScreen, Menu... menus) {
<b class="nc">&nbsp;		this(clearScreen, true, menus);</b>
<b class="nc">&nbsp;	}</b>
&nbsp;
&nbsp;	public Display(boolean clearScreen, boolean canExit) {
<b class="nc">&nbsp;		this(clearScreen, canExit, new Menu[0]);</b>
<b class="nc">&nbsp;	}</b>
&nbsp;
<b class="fc">&nbsp;	public Display(boolean clearScreen, boolean canExit, Menu... menus) {</b>
<b class="fc">&nbsp;		this.menus = menus;</b>
<b class="fc">&nbsp;		this.canExit = canExit;</b>
<b class="fc">&nbsp;		this.clearScreen = clearScreen;</b>
<b class="fc">&nbsp;		selection = 0;</b>
<b class="fc">&nbsp;	}</b>
&nbsp;
<b class="fc">&nbsp;	private boolean setParent = false;</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * Called during {@link Game#setDisplay}
&nbsp;	 */
&nbsp;	public void init(@Nullable Display parent) {
<b class="nc">&nbsp;		if (!setParent) {</b>
<b class="nc">&nbsp;			setParent = true;</b>
<b class="nc">&nbsp;			this.parent = parent;</b>
&nbsp;		}
<b class="nc">&nbsp;	}</b>
&nbsp;
&nbsp;	public void onExit() {
<b class="nc">&nbsp;	}</b>
&nbsp;
&nbsp;	public Display getParent() {
<b class="nc">&nbsp;		return parent;</b>
&nbsp;	}
&nbsp;
&nbsp;	public void tick(InputHandler input) {
&nbsp;
<b class="nc">&nbsp;		if (canExit &amp;&amp; input.inputPressed(&quot;exit&quot;)) {</b>
<b class="nc">&nbsp;			Game.exitDisplay();</b>
<b class="nc">&nbsp;			return;</b>
&nbsp;		}
&nbsp;
<b class="nc">&nbsp;		if (menus.length == 0) return;</b>
&nbsp;
<b class="nc">&nbsp;		boolean changedSelection = false;</b>
&nbsp;
<b class="nc">&nbsp;		if (menus.length &gt; 1 &amp;&amp; menus[selection].isSelectable()) { // If menu set is unselectable, it must have been intentional, so prevent the user from setting it back.</b>
<b class="nc">&nbsp;			int prevSel = selection;</b>
&nbsp;
<b class="nc">&nbsp;			String shift = menus[selection].getCurEntry() instanceof ArrayEntry ? &quot;shift-&quot; : &quot;&quot;;</b>
<b class="nc">&nbsp;			if (input.getMappedKey(shift + &quot;left&quot;).isClicked() || input.leftTriggerPressed()) selection--;</b>
<b class="nc">&nbsp;			if (input.getMappedKey(shift + &quot;right&quot;).isClicked() || input.rightTriggerPressed()) selection++;</b>
&nbsp;
<b class="nc">&nbsp;			if (prevSel != selection) {</b>
<b class="nc">&nbsp;				Sound.play(&quot;select&quot;);</b>
&nbsp;
<b class="nc">&nbsp;				int delta = selection - prevSel;</b>
<b class="nc">&nbsp;				selection = prevSel;</b>
&nbsp;				do {
<b class="nc">&nbsp;					selection += delta;</b>
<b class="nc">&nbsp;					if (selection &lt; 0) selection = menus.length - 1;</b>
<b class="nc">&nbsp;					selection = selection % menus.length;</b>
<b class="nc">&nbsp;				} while (!menus[selection].isSelectable() &amp;&amp; selection != prevSel);</b>
&nbsp;
<b class="nc">&nbsp;				changedSelection = prevSel != selection;</b>
&nbsp;			}
&nbsp;
<b class="nc">&nbsp;			if (changedSelection)</b>
<b class="nc">&nbsp;				onSelectionChange(prevSel, selection);</b>
&nbsp;		}
&nbsp;
<b class="nc">&nbsp;		if (!changedSelection)</b>
<b class="nc">&nbsp;			menus[selection].tick(input);</b>
<b class="nc">&nbsp;	}</b>
&nbsp;
&nbsp;	protected void onSelectionChange(int oldSel, int newSel) {
<b class="nc">&nbsp;		selection = newSel;</b>
<b class="nc">&nbsp;	}</b>
&nbsp;
&nbsp;	// Sub-classes can do extra rendering here; this renders each menu that should be rendered, in the order of the array, such that the currently selected menu is rendered last, so it appears on top (if they even overlap in the first place).
&nbsp;	public void render(Screen screen) {
<b class="nc">&nbsp;		if (clearScreen)</b>
<b class="nc">&nbsp;			screen.clear(0);</b>
<b class="nc">&nbsp;		else if (setParent &amp;&amp; parent != null) {</b>
<b class="nc">&nbsp;			parent.render(screen); // Renders the parent display as background.</b>
&nbsp;		}
&nbsp;
<b class="nc">&nbsp;		if (menus.length == 0)</b>
<b class="nc">&nbsp;			return;</b>
&nbsp;
<b class="nc">&nbsp;		int idx = selection;</b>
&nbsp;		do {
<b class="nc">&nbsp;			idx++;</b>
<b class="nc">&nbsp;			idx = idx % menus.length;</b>
<b class="nc">&nbsp;			if (menus[idx].shouldRender())</b>
<b class="nc">&nbsp;				menus[idx].render(screen);</b>
<b class="nc">&nbsp;		} while (idx != selection);</b>
<b class="nc">&nbsp;	}</b>
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-19 15:54</div>
</div>
</body>
</html>
